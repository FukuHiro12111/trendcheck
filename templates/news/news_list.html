{% extends 'base.html' %} {% block content %}

<div class="btn-yahoo-news">
  <button type="submit" class="btn btn-primary" id="yahoo_button">
    Yahooニュース
  </button>

  <div class="container" id="post">
    <ul class="list-group list-group-flush">
      <table border="2">
        <tr>
          <th>タイトル</th>
          <th></th>
        </tr>
        {% for title, url in list %}
        <tr>
          <td><a href="{{ url }}">{{ title }}</a></td>
          <td><button type="submit">保存</button></td>
        </tr>
        {% endfor %}
      </table>
    </ul>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script type="text/javascript">
    $(() => {
      $("button").click(() => {
        // Ajax通信を開始する
        $.ajax({
          type: "GET", // HTTPリクエストメソッドの指定
          // dataType: "json", // 受信するデータタイプの指定
          //data: button.serialize(), // クエリパラメータの指定。サーバーに送信したいデータを指定
          url: "yahoo/",
          success: (res) => {
            // $("#post").removeClass("container");
            // $("#post").addClass("container");
            $("#post").text(res);
            console.log("res", res.con);
          },
          error: () => {
            console.log("失敗");
          },
        });
      });
    });
  </script>
</div>
{% endblock content %}
